!function(){function t(){var t=construct.options.shaders||[],e={};t.indexOf("rift")>-1;var s=APP.Views.Main3D;APP.Views.Main3D=s.extend({options:{worldScale:1,shaders:construct.options.shaders||[],hudID:"hud"},events:e,shaders:new Backbone.Model,_start:function(t){if(_.inArray("rift",this.options.shaders)){var e=new THREE.OculusRiftEffect(t.renderer,{worldScale:this.options.worldScale});e.setSize(window.innerWidth,window.innerHeight),this.shaders.set({rift:e}),vrhtml.startWithoutNPVR(this.options.hudID)}return s.prototype._start.call(this,t)},_updateShaders:function(){},_update:function(t){var e=this.shaders.attributes,n=this.$3d.active.scene,r=this.$3d.active.camera;if(!_.isEmpty(e)&&n&&r)for(var i in e)e[i].render(n,r);return s.prototype._update.call(this,t)}})}function e(){var t=APP.Mesh;APP.Mesh=t.extend({shaders:new Backbone.Model})}"undefined"!=typeof construct&&(construct.shaders=function(t){return t=t||[],t.indexOf("rift")>-1&&(construct.config.deps.push("three-oculus"),construct.config.deps.push("vrhtml")),Object.extend(construct.options,{shaders:t}),function(){}},construct.config=Object.extend(construct.config,{paths:{"three-oculus":["//rawgit.com/constructjs/shaders/master/deps/OculusRiftEffect"],vrhtml:["//rawgit.com/constructjs/shaders/master/deps/vrhtml"]},shim:{"three-oculus":{deps:["three-js"]}}}),_.mixin({inArray:_.inArray||function(t,e){return e.indexOf(t)>-1},inDebug:_.inDebug||function(){return"undefined"!=typeof DEBUG&&DEBUG}}),construct.promise.add(function(){t(),e()}))}();