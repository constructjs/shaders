!function(){function t(){var t=construct.options.shaders||[],e={};t.indexOf("rift")>-1;var n=APP.Views.Main3D;APP.Views.Main3D=n.extend({options:{worldScale:1,shaders:construct.options.shaders},events:e,shaders:new Backbone.Model,_start:function(t){if(_.inArray("rift",this.options.shaders)){var e=new THREE.OculusRiftEffect(t.renderer,{worldScale:this.options.worldScale});e.setSize(window.innerWidth,window.innerHeight),this.shaders.set({rift:e})}return n.prototype._start.call(this,t)},update:function(){var t=this.shaders.attributes;if(!_.isEmpty(t)){var e=this.$3d.active.scene,n=this.$3d.active.camera;if(e&&n)for(var s in t)t[s].render(e,n)}}})}function e(){var t=APP.Mesh;APP.Mesh=t.extend({shaders:new Backbone.Model})}"undefined"!=typeof construct&&(construct.shaders=function(t){return t=t||[],t.indexOf("rift")>-1&&construct.config.deps.push("three-oculus"),Object.extend(construct.options,{shaders:t}),function(){}},construct.config=Object.extend(construct.config,{paths:{"three-oculus":["//rawgit.com/constructjs/shaders/master/deps/OculusRiftEffect"]},shim:{"three-oculus":{deps:["three-js"]}}}),_.mixin({inArray:_.inArray||function(t,e){return e.indexOf(t)>-1},inDebug:_.inDebug||function(){return"undefined"!=typeof DEBUG&&DEBUG}}),construct.promise.add(function(){t(),e()}))}();